# 로딩/에러 상태 UX 패턴 정의

## UX-MVP-005: 로딩 및 에러 상태 가이드라인

### 개요
로딩과 에러 상태는 사용자 경험의 중요한 부분입니다. 적절한 피드백을 통해 사용자의 불안감을 줄이고 신뢰를 유지합니다.

---

## 1. 로딩 상태 유형

### 1.1 로딩 유형 분류

| 유형 | 지속 시간 | UI 패턴 |
|------|----------|---------|
| 순간 로딩 | < 300ms | 피드백 없음 |
| 짧은 로딩 | 300ms - 1s | 스피너 |
| 중간 로딩 | 1s - 3s | 스켈레톤 UI |
| 긴 로딩 | > 3s | 진행률 표시 |

---

## 2. 스켈레톤 UI (Skeleton)

### 2.1 피드 카드 스켈레톤

```
┌─────────────────────────────────────────────────────┐
│  ┌────┐   ▓▓▓▓▓▓▓▓▓▓  •  ▓▓▓▓▓                     │
│  │▓▓▓▓│                                            │
│  │▓▓▓▓│   ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓           │
│  └────┘   ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓        │
│           ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓                        │
│                                                    │
│           ▓▓▓   ▓▓▓   ▓▓▓                         │
└─────────────────────────────────────────────────────┘

애니메이션: 좌→우 그라디언트 시머 효과
주기: 1.5초
```

### 2.2 게시글 상세 스켈레톤

```
┌─────────────────────────────────────────────────────┐
│                                                     │
│  ┌────┐   ▓▓▓▓▓▓▓▓▓  •  ▓▓▓▓                       │
│  │▓▓▓▓│   ▓▓▓▓▓▓▓▓                                 │
│  └────┘                                            │
│                                                     │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓                          │
│  ═══════════════════════════════════════════════   │
│                                                     │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓  │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓          │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓    │
│                                                     │
│  ┌───────────────────────────────────────────────┐ │
│  │                                               │ │
│  │              ▓▓▓▓▓▓▓▓▓▓▓▓▓▓                  │ │
│  │                                               │ │
│  └───────────────────────────────────────────────┘ │
│                                                     │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓                │
│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓          │
│                                                     │
└─────────────────────────────────────────────────────┘
```

### 2.3 댓글 스켈레톤

```
┌─────────────────────────────────────────────────────┐
│  ┌──┐  ▓▓▓▓▓▓▓▓  •  ▓▓▓▓                           │
│  │▓▓│  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓            │
│  └──┘  ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓                       │
│        ▓▓▓   ▓▓▓                                   │
└─────────────────────────────────────────────────────┘
```

### 2.4 CSS 구현

```css
/* 스켈레톤 기본 스타일 */
.skeleton {
  background: linear-gradient(
    90deg,
    #f0f0f0 25%,
    #e0e0e0 50%,
    #f0f0f0 75%
  );
  background-size: 200% 100%;
  animation: shimmer 1.5s infinite;
  border-radius: 4px;
}

@keyframes shimmer {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

/* 다크모드 */
.dark .skeleton {
  background: linear-gradient(
    90deg,
    #2a2a2a 25%,
    #3a3a3a 50%,
    #2a2a2a 75%
  );
}
```

---

## 3. 스피너 (Spinner)

### 3.1 기본 스피너

```
      ◜ ◝
     ◟   ◞

크기: 24px (기본), 16px (소형), 32px (대형)
색상: Primary Color
회전 속도: 1초당 1회전
```

### 3.2 버튼 내 스피너

```
기본 상태:           로딩 상태:
┌─────────────┐     ┌─────────────┐
│   등록하기   │  →  │   ◌ ...    │
└─────────────┘     └─────────────┘
```

### 3.3 인라인 스피너

```
댓글을 불러오는 중...  ◌
```

---

## 4. 진행률 표시 (Progress)

### 4.1 선형 진행률 바

```
┌───────────────────────────────────────────────────────┐
│  이미지 업로드 중...                              75%  │
│  ████████████████████████████░░░░░░░░░░░░░░           │
└───────────────────────────────────────────────────────┘
```

### 4.2 원형 진행률

```
        ╭───╮
       ╱  75% ╲
      │   %   │
       ╲     ╱
        ╰───╯
```

### 4.3 단계별 진행률

```
게시글 작성 진행 상황:

  ①───────②───────③
  제목     본문     발행
  ✓        현재     대기
```

---

## 5. Pull to Refresh

### 5.1 상태 흐름

```
상태 1: 기본
┌────────────────────────────────┐
│  (피드 콘텐츠)                 │
└────────────────────────────────┘

상태 2: 당기는 중 (threshold 미달)
┌────────────────────────────────┐
│          ↓                     │
│     당겨서 새로고침            │
│  (피드 콘텐츠)                 │
└────────────────────────────────┘

상태 3: 당기는 중 (threshold 도달)
┌────────────────────────────────┐
│          ↑                     │
│     놓으면 새로고침            │
│  (피드 콘텐츠)                 │
└────────────────────────────────┘

상태 4: 새로고침 중
┌────────────────────────────────┐
│          ◌                     │
│     새로고침 중...             │
│  (피드 콘텐츠)                 │
└────────────────────────────────┘
```

### 5.2 설정값

| 항목 | 값 |
|------|-----|
| 최소 당김 거리 | 60px |
| 트리거 거리 | 80px |
| 최대 당김 거리 | 120px |
| 로딩 영역 높이 | 50px |

---

## 6. 무한 스크롤 로딩

### 6.1 로딩 인디케이터

```
┌────────────────────────────────┐
│  (기존 게시글들)               │
│                                │
├────────────────────────────────┤
│           ◌ ◌ ◌                │
│     더 불러오는 중...          │
└────────────────────────────────┘
```

### 6.2 끝 도달

```
┌────────────────────────────────┐
│  (모든 게시글)                 │
│                                │
├────────────────────────────────┤
│    ─ ─ ─ ─ ─ ─ ─ ─ ─          │
│     모든 게시글을 확인했습니다  │
└────────────────────────────────┘
```

---

## 7. 에러 상태 유형

### 7.1 네트워크 에러

```
┌─────────────────────────────────────┐
│                                     │
│           📡                        │
│                                     │
│    인터넷 연결을 확인해주세요       │
│                                     │
│    네트워크에 연결되어 있지         │
│    않습니다.                        │
│                                     │
│    [다시 시도]                      │
│                                     │
└─────────────────────────────────────┘
```

### 7.2 서버 에러 (500)

```
┌─────────────────────────────────────┐
│                                     │
│           ⚠️                        │
│                                     │
│    일시적인 오류가 발생했습니다     │
│                                     │
│    잠시 후 다시 시도해주세요.       │
│                                     │
│    [다시 시도]      [문의하기]      │
│                                     │
└─────────────────────────────────────┘
```

### 7.3 권한 없음 (403)

```
┌─────────────────────────────────────┐
│                                     │
│           🔒                        │
│                                     │
│    접근 권한이 없습니다             │
│                                     │
│    이 콘텐츠를 볼 수 있는           │
│    권한이 없습니다.                 │
│                                     │
│    [돌아가기]                       │
│                                     │
└─────────────────────────────────────┘
```

### 7.4 찾을 수 없음 (404)

```
┌─────────────────────────────────────┐
│                                     │
│           🔍                        │
│                                     │
│    페이지를 찾을 수 없습니다        │
│                                     │
│    요청하신 페이지가 삭제되었거나   │
│    주소가 변경되었을 수 있습니다.   │
│                                     │
│    [홈으로 가기]                    │
│                                     │
└─────────────────────────────────────┘
```

### 7.5 입력 에러 (400)

```
인라인 에러:
┌───────────────────────────────────────────┐
│  제목 *                                   │
│  ┌─────────────────────────────────────┐  │
│  │                                     │  │
│  └─────────────────────────────────────┘  │
│  ⚠️ 제목을 입력해주세요                   │
│     └─ 빨간색 텍스트                      │
└───────────────────────────────────────────┘
```

---

## 8. 빈 상태 (Empty State)

### 8.1 피드 빈 상태

```
┌─────────────────────────────────────┐
│                                     │
│           📭                        │
│                                     │
│    아직 게시글이 없습니다           │
│                                     │
│    첫 번째 게시글을 작성해보세요!   │
│                                     │
│    [글 작성하기]                    │
│                                     │
└─────────────────────────────────────┘
```

### 8.2 검색 결과 없음

```
┌─────────────────────────────────────┐
│                                     │
│           🔍                        │
│                                     │
│    "검색어"에 대한 결과가 없습니다  │
│                                     │
│    • 다른 검색어를 시도해보세요     │
│    • 맞춤법을 확인해보세요          │
│                                     │
└─────────────────────────────────────┘
```

### 8.3 북마크 없음

```
┌─────────────────────────────────────┐
│                                     │
│           🔖                        │
│                                     │
│    저장한 게시글이 없습니다         │
│                                     │
│    관심 있는 게시글을 북마크하면    │
│    여기서 모아볼 수 있습니다.       │
│                                     │
│    [피드 둘러보기]                  │
│                                     │
└─────────────────────────────────────┘
```

### 8.4 댓글 없음

```
┌─────────────────────────────────────┐
│                                     │
│           💬                        │
│                                     │
│    첫 번째 댓글을 남겨보세요        │
│                                     │
└─────────────────────────────────────┘
```

---

## 9. 토스트 메시지

### 9.1 유형별 디자인

#### 성공 (Success)
```
┌─────────────────────────────────────┐
│  ✅  게시글이 등록되었습니다        │
└─────────────────────────────────────┘
배경: 초록색 계열
지속: 3초
```

#### 경고 (Warning)
```
┌─────────────────────────────────────┐
│  ⚠️  네트워크 연결이 불안정합니다   │
└─────────────────────────────────────┘
배경: 노란색 계열
지속: 5초
```

#### 에러 (Error)
```
┌─────────────────────────────────────┐
│  ❌  저장에 실패했습니다  [다시시도]│
└─────────────────────────────────────┘
배경: 빨간색 계열
지속: 사용자 닫기 전까지
```

#### 정보 (Info)
```
┌─────────────────────────────────────┐
│  ℹ️  새로운 게시글이 있습니다 [보기]│
└─────────────────────────────────────┘
배경: 파란색 계열
지속: 5초
```

### 9.2 토스트 위치

```
데스크톱: 우측 상단
모바일: 상단 (노치 아래)

┌─────────────────────────────────┐
│  [토스트 메시지]            ✕  │ ← 데스크톱 위치
├─────────────────────────────────┤
│                                 │
│                                 │
│        (콘텐츠 영역)            │
│                                 │
│                                 │
└─────────────────────────────────┘
```

### 9.3 스택 처리

```
여러 토스트가 동시에 발생할 때:

┌─────────────────────────────────┐ ← 최신
│  ✅  저장되었습니다             │
└─────────────────────────────────┘
┌─────────────────────────────────┐ ← 이전
│  ℹ️  새 알림이 있습니다         │
└─────────────────────────────────┘

최대 3개까지 표시
초과 시 오래된 것부터 제거
```

---

## 10. 오프라인 상태

### 10.1 오프라인 배너

```
┌─────────────────────────────────────────────────────┐
│  📡  오프라인 상태입니다. 일부 기능이 제한됩니다.  │
└─────────────────────────────────────────────────────┘
```

### 10.2 오프라인 시 동작

| 기능 | 동작 |
|------|------|
| 피드 조회 | 캐시된 콘텐츠 표시 |
| 글 작성 | 로컬 저장 → 온라인 시 동기화 |
| 좋아요/북마크 | 큐에 저장 → 온라인 시 동기화 |
| 댓글 | 비활성화 |

### 10.3 동기화 상태

```
┌─────────────────────────────────────────────────────┐
│  🔄  연결 복구 중... 3개 항목 동기화 대기          │
└─────────────────────────────────────────────────────┘

↓ 동기화 완료 후

┌─────────────────────────────────────────────────────┐
│  ✅  모든 변경사항이 동기화되었습니다              │
└─────────────────────────────────────────────────────┘
```

---

## 11. 접근성 고려사항

### 11.1 스크린 리더 지원

```html
<!-- 로딩 상태 -->
<div role="status" aria-busy="true" aria-live="polite">
  게시글을 불러오는 중입니다
</div>

<!-- 에러 상태 -->
<div role="alert" aria-live="assertive">
  오류가 발생했습니다. 다시 시도해주세요.
</div>
```

### 11.2 포커스 관리

| 상황 | 포커스 이동 |
|------|------------|
| 로딩 완료 | 로드된 첫 번째 항목 |
| 에러 발생 | 에러 메시지 |
| 토스트 표시 | 유지 (이동 안 함) |
| 모달 닫힘 | 트리거 버튼으로 복귀 |
